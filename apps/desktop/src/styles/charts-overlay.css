/* Chart overlay layer (canvas). */
.grid-canvas--chart {
  pointer-events: none;
  /*
    Deterministic overlay stacking across both legacy and shared grid renderers:
    charts should render above the grid cell content but below the drawings/images overlay.
  */
  z-index: 2;
  z-index: var(--grid-z-chart-overlay, 2);
}

.chart-selection-canvas {
  /* Selection handles for charts are painted on a separate overlay canvas. */
  pointer-events: none;
  /* Keep chart handles above charts/drawings (matches selection overlay ordering). */
  z-index: 4;
  z-index: var(--grid-z-selection-overlay, 4);
}

/* Canvas-based drawings overlay (shapes, images, etc). */
.drawing-layer {
  position: absolute;
  pointer-events: none;
  overflow: hidden;
  left: 0;
  top: 0;
  /*
    Deterministic overlay stacking across both legacy and shared grid renderers:
    drawings/images should render above the grid cell content and charts, but below selection + outline.
  */
  z-index: 3;
  z-index: var(--grid-z-drawings-overlay, var(--grid-z-drawing-overlay, 3));
}

/* -------------------------------------------------------------------------- */
/* Shared-grid overlay stacking                                                */
/* -------------------------------------------------------------------------- */

/*
  z-index ordering is controlled via CSS variables so the relative ordering is
  easy to reason about and can be overridden per grid root if needed.

  Keep these below the scrollbar layer (z-index: 5 in scrollbars.css) and below
  any floating UI (comments, tooltips, conflicts, etc).
*/
.grid-root {
  /* CanvasGridRenderer uses z-index 0/1/2 for its base/content/selection canvases. */
  --grid-z-chart-overlay: 2;
  --grid-z-drawings-overlay: 3;
  /* Back-compat alias (older selectors used singular `drawing`). */
  --grid-z-drawing-overlay: var(--grid-z-drawings-overlay);
  --grid-z-selection-overlay: 4;
  --grid-z-outline-overlay: 4;
}

/*
  Grid overlay stacking (low â†’ high):
    - cells (CanvasGridRenderer base/content canvases: z=0/1)
    - chart canvas (z=2)
    - drawings/images canvas (z=3)
    - selection + outline (z=4)
    - scrollbars (z=5; see scrollbars.css)
    - cell editor (z=10; see shell.css)
*/

.grid-canvas--selection {
  z-index: 4;
  z-index: var(--grid-z-selection-overlay, 4);
}

.outline-layer {
  z-index: 4;
  z-index: var(--grid-z-outline-overlay, 4);
}

.drawing-layer--shared {
  z-index: 3;
  z-index: var(--grid-z-drawings-overlay, var(--grid-z-drawing-overlay, 3));
}

.grid-canvas--drawings {
  /* Semantic hook for the drawings/images overlay canvas (no-op by default). */
}

.grid-canvas--shared-drawings {
  z-index: 3;
  z-index: var(--grid-z-drawings-overlay, var(--grid-z-drawing-overlay, 3));
}

.grid-canvas--shared-chart {
  z-index: 2;
  z-index: var(--grid-z-chart-overlay, 2);
}

.grid-canvas--shared-selection {
  /* Override CanvasGridRenderer's inline z-index (2) in shared-grid mode. */
  z-index: 4 !important;
  z-index: var(--grid-z-selection-overlay, 4) !important;
}

.outline-layer--shared {
  z-index: 4;
  z-index: var(--grid-z-outline-overlay, 4);
}

/* (Reserved) additional chart/drawing overlay styles go here. */
